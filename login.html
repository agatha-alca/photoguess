
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photoguess</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>
    
</body>
</html>

<main>
    <form class="Login" action="cadastro.html" method="POST">
        <fieldset>
            <div class="Login">
                <h1>Photoguess</h1><br>
                <h2>Login de usu√°rio</h2>
                <div class="caixa"> 
                <p> <label>Email</label> </p> 
                    <input placeholder="Digite seu email de login" type="email" name="email" id="email" required>
                <p><label>Senha</label> </p> 
                <input placeholder="Digite sua senha " type="password" name="senha" id="senha" required> <br>
             <p><button type="button" onclick="fazerLogin()">Login</button></p>

               <center><h4>N√£o possui um login?<a href="cadastro.html"> Cadastrar-se</a></h4></center>
               <div id="google-login-button" class="google-login-separator">
    <p style="text-align: center; margin: 15px 0; font-weight: bold; color: #555;">OU ENTRE COM</p>
    <div id="g_id_onload"
        data-client_id="SEU_CLIENT_ID_AQUI" 
        data-context="signin"
        data-ux_mode="popup"
        data-callback="handleGoogleLogin" 
        data-auto_prompt="false">
    </div>
    <div class="g_id_signin"
        data-type="standard"
        data-shape="rectangular"
        data-theme="outline"
        data-text="signin_with"
        data-size="large"
        data-locale="pt-BR"
        data-logo_alignment="left">
    </div>
</div>
            </div>
            </div>
        </fieldset>
    </form>
</main>
<footer>
    <p>üÖæÔ∏é Photoguess, Se divirta no mundo das Fotos antigas!</p>
    </footer>

    <script>
        // Fun√ß√£o executada ao carregar p√°gina principal
        window.onload = function () {
            atualizarInterface();
        };

        // Atualiza bot√µes e o nome do usu√°rio conforme login
            function atualizarInterface () {
            const email = localStorage.getItem("emailLogado");
            const nomeSpan = document.getElementById("usuarioNome");
            const btnLogin = document.getElementById("btnLogin");
            const btnSair = document.getElementById("btnSair");

            if (email) {
                nomeSpan.textContent = ` Ol√°, ${email}!`;
                btnLogin.style.display = "none";
                btnSair.style.display = "inline-block";
            } else {
                nomeSpan.textContent = "";
                btnLogin.style.display = "inline-block";
                btnSair.style.display = "none";
            }
        }

        // ir para p√°gina de login 
        function irParaLogin () {
            window.location.href = "login.html";
        }

        // Fun√ß√£o login ( Executa no login.html)
        function fazerLogin () {
            const email = document.getElementById("email").value;
            const senha = document.getElementById("senha").value;

            if (email && senha) {
                localStorage.setItem("emailLogado", email);
                alert("Login foi feito com sucesso!");
                window.location.href = "index.html";
            } else {
                alert("Preencha email e senha!");
            }
        }

            // entre para jogar
            function entre(jogar) {
                const email = localStorage.getItem ("emailLogado");
                if (email) {
                    alert (`${email}, Voce est√° logado. "${jogar}" Pronto, Agora pode jogar!`);
                } else { 
                    alert ("Fa√ßa seu login para poder jogar. ");
                    window.location.href = "login.html";
                }
            }

            // sair da conta
            function sair() {
                localStorage.removeItem("emailLogado");
                alert("Voc√™ saiu da conta.");
                window.location.href = "login.html";
            }

            // == Login ==
            function fazerLogin () {
                const email = document.getElementById("email").value;
                const senha = document.getElementById("senha").value;

                if ( email && senha ) {
                    // Guarda o nome do usu√°rio no armazenamento local
                    localStorage.setItem("emailLogado", email);
                    alert("Login feito com sucesso,"+ email + "!");
                    // Redireciona para o site principal 
                    window.location.href = "index.html";
                } else {
                    alert("Preencha o email e a senha!");
                }
            }

            // Atualiza a interface do site principal
            window.onload = function () {
                if (document.title.includes ("Photoguess")) {
                    atualizarInterface ();
                }
            };
            function atualizarInterface () {
                const email = localStorage.getItem ("emailLogado");
                const nomeSpan = document.getElementById ("usuarioNome");
                const btnLogin = document.getElementById ("btnLogin");
                const btnSair = document.getElementById ("btnSair");

            }
             if (usuario) {
    nomeSpan.textContent = `Ol√°, ${email}!`;
    btnLogin.style.display = "none";
    btnSair.style.display = "inline-block";
  } else {
    nomeSpan.textContent = "";
    btnLogin.style.display = "inline-block";
    btnSair.style.display = "none";
  }
  // ======= LOGIN =======
function fazerLogin() {
      const email = document.getElementById("email").value.trim();
      const senha = document.getElementById("senha").value.trim();

      // Recupera os usu√°rios salvos no localStorage
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

      // Procura um usu√°rio com mesmo email e senha
      const encontrado = usuarios.find(u => u.email === email && u.senha === senha);

      if (encontrado) {
        localStorage.setItem("usuarioLogado", email);
        alert("Login feito com sucesso!");
        window.location.href = "index.html"; // redireciona para a home
      } else {
        alert("Email ou senha incorretos!");
      }
    }
// ====== Cadastro ======

        function cadastrar () {
            const novoEmail = document.getElementByID("novoEmail").value;
            const novaSenha = document.getElementById("novaSenha").value

            if (novoEmail && novaSenha){
                const emailsSalvos = JSON.parse(localStorage.getItem("emails")) || [];
                
                const jaExiste = emailsSalvos.some((u) => u.none === novoEmail);
                if(jaExiste){
                    alert("Esse email j√° existe! Escolha outro email");
                    return;
                }
                emailsSalvos.push({email: novoEmail, senha: novaSenha});
                localStorage.setItem("emails",JSON.stringify(emailsSalvos));
                alert("Login efetuado com sucesso!");
                window.location.href = "login.html";
            } else {
                alert("Preencha todos os campos!");
            }
        }
        // Fun√ß√£o para manipular a resposta do Google (ID Token)
    function handleGoogleLogin(response) {
        // ... (Sua l√≥gica de decodifica√ß√£o e login) ...
        const jwtToken = response.credential;
        
        // Simula√ß√£o de decodifica√ß√£o do JWT
        const base64Url = jwtToken.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        const payload = JSON.parse(jsonPayload);
        const email = payload.email; // Email do usu√°rio Google

        if (email) {
            // Loga o usu√°rio Google no seu sistema local (localStorage)
            localStorage.setItem("emailLogado", email);
            alert("Login com Google feito com sucesso, " + email + "!");
            // Redireciona para o perfil ap√≥s o login
            window.location.href = "perfil.html"; 
        } else {
            alert("Erro ao obter dados do Google.");
        }
    }

            // entre para jogar
            function entre(jogar) {
                const email = localStorage.getItem ("emailLogado");
                if (email) {
                    alert (`${email}, Voce est√° logado. "${jogar}" Pronto, Agora pode jogar!`);
                } else { 
                    alert ("Fa√ßa seu login para poder jogar. ");
                    window.location.href = "login.html";
                }
            }

            // sair da conta
            function sair() {
                localStorage.removeItem("emailLogado");
                alert("Voc√™ saiu da conta.");
                window.location.href = "login.html";
            }

            // === Navega√ß√£o entre as p√°ginas ===
            function irParaLogin (){
                window.location.href = "login.html";
            }
            function irParaCadastro () {
                window.location.href = "cadastro.html";
            }
            function fazerLogin () {
                window.location.href = "index.html";
            }

            </script>
            <script src="https://accounts.google.com/gsi/client" async defer></script>
            
            </body>
            </html>








                  


        



