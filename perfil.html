<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usu√°rio | Photoguess</title>
    <link rel="stylesheet" href="perfil.css">
</head>
<body>
    <header class="navbar">
        <nav>
            <a href="index.html">In√≠cio</a>
            <a href="login.html">Login</a>
            <a href="cadastro.html">Cadastro</a>
            <a href="#" onclick="sair()">Sair</a>
        </nav>
    </header>

    <main>
        <div class="perfil-container">
            <span class="icone-perfil">üë§</span> 
            
            <h1>Perfil do Usu√°rio</h1>

            <div class="dados">
                <p><strong>Usu√°rio:</strong> <span id="perfilNome">Carregando...</span></p>
                <p><strong>Email:</strong> <span id="perfilEmail">Carregando...</span></p>
                </div>
            
            <button class="btn-logout" onclick="sair()">Sair da Conta (Bot√£o Opcional)</button>
        </div>
    </main>

    <footer>
        <p>üÖæÔ∏é Photoguess, Se divirta no mundo das Fotos antigas!</p>
    </footer>

    <script>
        // === FUN√á√ïES DE LOCAL STORAGE / BANCO DE DADOS ===
        
        /**
         * Simula a busca de um usu√°rio no "banco de dados" (localStorage) pelo email.
         * @param {string} email - O email do usu√°rio logado.
         * @returns {Object|null} Objeto do usu√°rio (se encontrado) ou null.
         */
        function buscarDadosUsuario(email) {
            const emailsSalvos = JSON.parse(localStorage.getItem("emails")) || [];
            const usuarioEncontrado = emailsSalvos.find(u => u.email === email);
            return usuarioEncontrado;
        }

        /**
         * Carrega os dados do usu√°rio logado e exibe na tela.
         */
        function carregarPerfil() {
            const emailLogado = localStorage.getItem("emailLogado");

            if (!emailLogado) {
                alert("Voc√™ precisa estar logado para acessar esta p√°gina.");
                window.location.href = "login.html"; // Redireciona para o login
                return;
            }

            const dadosUsuario = buscarDadosUsuario(emailLogado);
            const spanNome = document.getElementById("perfilNome");
            const spanEmail = document.getElementById("perfilEmail");
            
            if (dadosUsuario) {
                spanNome.textContent = dadosUsuario.email.split('@')[0]; // Exibe o que vem antes do @
                spanEmail.textContent = dadosUsuario.email;
            } else {
                spanNome.textContent = "Erro ao carregar";
                spanEmail.textContent = emailLogado;
            }
        }
        
        /**
         * Fun√ß√£o para sair da conta (Mantida)
         */
        function sair() {
            localStorage.removeItem("emailLogado");
            alert("Voc√™ saiu da conta.");
            window.location.href = "login.html"; // Redireciona
        }
        
        // Carrega o perfil ao abrir a p√°gina
        window.onload = carregarPerfil;

    </script>
</body>
</html>